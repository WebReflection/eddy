/*! (C) Andrea Giammarchi Mit Style License */
(function(e){"use strict";function b(){return{l:{},m:[],b:[]}}function w(e,t,n){s.call(e,t)||(e[t]=n)}function E(e,t,n){typeof t=="function"?t.apply(e,n):t.handleEvent.apply(t,n)}function S(e,t,n){w(this,"timeStamp",m());for(var r in n)s.call(n,r)&&w(this,r,n[r]);w(this,"type",t),w(this,"target",e),n&&w(this,"data",n)}function x(e){var t=n.toString,r=g[e],i=T[e];return function(){return(t.call(this)=="[object Object]"?r:i).apply(this,arguments)}}function N(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function C(e,t){return e.dispatchEvent(t)}if(e.eddy)return;e.eddy=!0;var t=Array.prototype,n=e.prototype,r=S.prototype,i=e.defineProperty,s=n.hasOwnProperty,o=t.push,u=t.slice,a=t.unshift,f="toLocaleString",l={toLocaleString:1}.propertyIsEnumerable(f)?"_@eddy"+Math.random():f,c=l===f,h=c||(e.create||e)(null),p=c?function(e){return e[l]=b(),e[l]}:function(e){var t=b();return h.value=t,i(e,l,h),h.value=null,t},d=e.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}},v=t.indexOf||function(e){var t=this.length;while(t--&&this[t]!==e);return t},m=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},g={boundTo:function(t){var n=s.call(this,l)?this[l]:p(this),r=n.m,i=n.b,u=typeof t=="string"?this[t]:t,a=v.call(r,u);return a<0?i[o.call(r,u)-1]=d.call(u,this):i[a]},emit:function(t){var n=s.call(this,l),r=n&&this[l].l,i=n&&s.call(r,t),o=i&&r[t],a=i&&u.call(arguments,1),f=0,c=i?o.length:f;while(f<c)E(this,o[f++],a);return i},off:function(t,n){var r=s.call(this,l),i=r&&this[l].l,o=r&&s.call(i,t)&&i[t],u;return o&&(u=v.call(o,n),-1<u&&(o.splice(u,1),o.length||delete i[t])),this},on:function(t,n,r){var i=s.call(this,l),u=(i?this[l]:p(this)).l,f=i&&s.call(u,t)?u[t]:u[t]=[];return v.call(f,n)<0&&(r?a:o).call(f,n),this},once:function(t,n,r){var i=this;return i.on(t,function s(e){i.off(t,s,r),E(i,n,arguments)},r)},trigger:function(t,n){var i=s.call(this,l),o=i&&this[l].l,u=typeof t=="string",a=u?t:t.type,f=i&&s.call(o,a),c=f&&o[a],h=u?new S(this,a,n):t,p=[h],d=0,v=f?c.length:d,m=!(h instanceof S),g,y;m&&(h._active=!0,h.stopImmediatePropagation=r.stopImmediatePropagation);while(h._active&&d<v)E(this,c[d++],p);return g=!!h._active,m&&(delete h._active,delete h.stopImmediatePropagation),g}},y;r._active=!0,r.stopImmediatePropagation=function(){this._active=!1};var T={boundTo:g.boundTo,emit:function(t){return C(this,N(t))},off:function(e,t,n){return this.removeEventListener(e,t,n),this},on:function(e,t,n){return this.addEventListener(e,t,n),this},once:function(t,n,r){var i=this;return i.on(t,function s(e){i.off(t,s,r),E(i,n,[e])},r)},trigger:function(t,n){var r=typeof t=="string",i=r?t:t.type,s=N(i);return S.call(s,this,i,r&&n),C(this,s)}};for(y in g)s.call(g,y)&&i(n,y,{enumerable:!1,configurable:!0,writable:!0,value:x(y)})})(Object);