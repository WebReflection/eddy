/*! (C) Andrea Giammarchi Mit Style License */
(function(e){"use strict";function y(){return{l:{},m:[],b:[]}}function b(e,t,n){i.call(e,t)||(e[t]=n)}function w(e){var t=y();return c.value=t,h(e,f,c),c.value=null,t}function E(e,t,n){typeof t=="function"?t.apply(e,n):t.handleEvent.apply(t,n)}function S(e,t,n){b(this,"timeStamp",v());for(var r in n)i.call(n,r)&&b(this,r,n[r]);b(this,"type",t),b(this,"target",e),n&&b(this,"data",n)}function T(e,t,n){var r=document.createEvent("Event");return r.initEvent(e,t,n),r}if(e.eddy)return;e.eddy=!0;var t=Array.prototype,n=e.prototype,r=S.prototype,i=n.hasOwnProperty,s=t.push,o=t.slice,u=t.unshift,a="toLocaleString",f={toLocaleString:1}.propertyIsEnumerable(a)?"_@eddy"+Math.random():a,l=f===a,c=(e.create||e)(null),h=l?function(e,t,n){e[t]=n.value}:e.defineProperty,p=function(e){var t=this;return function(){return t.apply(e,arguments)}},d=t.indexOf||function(e){var t=this.length;while(t--&&this[t]!==e);return t},v=Date.now||function(){return(new Date).getTime()},m={boundTo:function(t){var n=i.call(this,f)?this[f]:w(this),r=n.m,o=n.b,u=typeof t=="string"?this[t]:t,a=d.call(r,u);return a<0?o[s.call(r,u)-1]=p.call(u,this):o[a]},emit:function(t){var n=i.call(this,f),r=n&&this[f].l,s=n&&i.call(r,t),u=s&&r[t],a=s&&o.call(arguments,1),l=0,c=s?u.length:l;while(l<c)E(this,u[l++],a);return s},listeners:function(t){return i.call(this,f)&&i.call(this[f].l,t)&&this[f].l[t].slice()||[]},off:function(t,n){var r=i.call(this,f),s=r&&this[f].l,o=r&&i.call(s,t)&&s[t],u;return o&&(u=d.call(o,n),-1<u&&(o.splice(u,1),o.length||delete s[t])),this},on:function(t,n,r){var o=i.call(this,f),a=(o?this[f]:w(this)).l,l=o&&i.call(a,t)?a[t]:a[t]=[];return d.call(l,n)<0&&(r?u:s).call(l,n),this},once:function(t,n,r){var i=function(e){s.off(t,i,r),E(s,n,arguments)},s=this;return s.on(t,i,r)},trigger:function(t,n){var s=i.call(this,f),o=s&&this[f].l,u=typeof t=="string",a=u?t:t.type,l=s&&i.call(o,a),c=l&&o[a].slice(0),h=u?new S(this,a,n):t,p=[h],d=0,v=l?c.length:d,m=!(h instanceof S),g,y;m&&(h._active=!0,h.stopImmediatePropagation=r.stopImmediatePropagation),h.currentTarget=this;while(h._active&&d<v)E(this,c[d++],p);return g=!!h._active,m&&(delete h._active,delete h.stopImmediatePropagation),g}},g;r._active=!0,r.stopImmediatePropagation=function(){this._active=!1};for(g in m)i.call(m,g)&&h(n,g,{enumerable:!1,configurable:!0,writable:!0,value:m[g]});(function(e){function n(t){function n(e){e[t].apply(e,this)}return function(){return e.call(this,n,arguments),this}}for(var r in m)m.hasOwnProperty(r)&&!/^listeners|boundTo$/.test(r)&&h(t,r,{enumerable:!1,configurable:!0,writable:!0,value:n(r)})})(t.forEach);var x={boundTo:m.boundTo,emit:function(n){var r=T(n,!1,!1);return r.arguments=t.slice.call(arguments,1),this.dispatchEvent(r)},listeners:function(t){return[]},off:function(e,t,n){return this.removeEventListener(e,t,n),this},on:function(e,t,n){return this.addEventListener(e,t,n),this},once:m.once,trigger:function(t,n){var r=typeof t=="string",s=r?t:t.type,o=r?n||r:t,u=T(s,i.call(o,"bubbles")?o.bubbles:!0,i.call(o,"cancelable")?o.cancelable:!0);return S.call(u,this,s,r&&n),this.dispatchEvent(u)}};(function(e){var t=e.Window,n=t?t.prototype:e,r=(e.Node||e.Element||e.HTMLElement).prototype,s=(e.Document||e.HTMLDocument).prototype,o,u;for(o in x)i.call(x,o)&&(u={enumerable:!1,configurable:!0,writable:!0,value:x[o]},h(n,o,u),h(r,o,u),h(s,o,u))})(window)})(Object);