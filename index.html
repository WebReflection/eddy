<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Eddy by WebReflection</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Eddy</h1>
          <h2>Event Driven JS</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/WebReflection/eddy/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/WebReflection/eddy/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/WebReflection/eddy" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="event-driven-js" class="anchor" href="#event-driven-js"><span class="octicon octicon-link"></span></a>Event Driven JS</h1>

<p>a not so obtrusive and <em>highly optimized</em> attempt to make JavaScript more awesome than ever!</p>

<p><a href="http://travis-ci.org/WebReflection/eddy"><img src="https://secure.travis-ci.org/WebReflection/eddy.png" alt="build status"></a></p>

<p><a href="https://nodei.co/npm/eddy/"><img src="https://nodei.co/npm/eddy.png?downloads=true" alt="NPM"></a></p>

<h3>
<a name="the-eddyjs-philosophy" class="anchor" href="#the-eddyjs-philosophy"><span class="octicon octicon-link"></span></a>The eddy.js Philosophy</h3>

<p>It does not matter if you code client or server side, we all need the same thing and we keep using this or that library to obtain the same behavior.</p>

<p>I am talking about all <em>de-facto standards API</em> such <code>.on(type, handler)</code>, <code>.once(type, handler)</code>, <code>.off(type, handler)</code> together with <code>.emit(type, arg1, argN)</code> and <code>.listeners(type)</code> or <code>.trigger(type, data)</code> to deal with DOM nodes.</p>

<p><code>eddy.js</code> aim is to harmonize all these API at core level polluting in a <strong>non enumerable</strong> way the <code>Object.prototype</code> in a smart way that simply works!</p>

<p>This means, <em>as soon as we use one of those methods, objects become lazily Event Targets</em> so we can use them as such.</p>

<p>As summary, <a href="https://twitter.com/WebReflection/status/354958592601899008">this is the philosophy behind this module</a></p>

<blockquote>
<p>eddy.js is a very pragmatic approach, back those days where developers enriched native prototypes to do more with less code ;-)</p>
</blockquote>

<h3>
<a name="compatibility" class="anchor" href="#compatibility"><span class="octicon octicon-link"></span></a>Compatibility</h3>

<p><code>eddy.js</code> is compatible with the following <strong>mobile platforms</strong></p>

<ul>
<li>iOS 5, 6, 7+</li>
<li>Android 2.2+, 3, 4.0, 4.1, 4.2, 4.3+</li>
<li>Windows Phone 7, 8+</li>
<li>FirefoxOS 0.X, 1+</li>
<li>Blackberry 10 (probably older too, haven't tested yet)</li>
<li>webOS 2+</li>
<li>Nokia Asha and Nokia Xpress browser</li>
</ul><p>eddy is also compatible with the following <strong>desktop browsers</strong></p>

<ul>
<li>Chrome, Canary, and Chromium channel</li>
<li>Safari 5+ and Webkit Nightly</li>
<li>Internet Explorer 8, 9, 10, 11+</li>
<li>Firefox, Aurora, and Nightly channel</li>
<li>Opera</li>
</ul><h3>
<a name="objectprototype-enriched-api" class="anchor" href="#objectprototype-enriched-api"><span class="octicon octicon-link"></span></a>Object.prototype Enriched API</h3>

<p>Here a list of methods you can use by default in an <code>eddy.js</code> environment.</p>

<h4>
<a name="objectontype-handler-capture" class="anchor" href="#objectontype-handler-capture"><span class="octicon octicon-link"></span></a>Object#on(type, handler[, capture])</h4>

<p>Returns the object itself after adding an event handler.
This is basically the equivalent of <code>addListener</code> or <code>addEventListener</code>, where duplicated handlers for the same event are not allowed.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">stopWatch</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">startTime</span><span class="o">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span>
<span class="p">}.</span><span class="nx">on</span><span class="p">(</span>
  <span class="s1">'change'</span><span class="p">,</span>
  <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// log elapsed time per each change</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">startTime</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">stopWatch</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">'change'</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">10</span><span class="p">);</span>

<span class="c1">// or using the boundTo method</span>
<span class="c1">// and the extra arguments accepted by setInterval</span>
<span class="nx">setInterval</span><span class="p">(</span><span class="nx">stopWatch</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="s1">'emit'</span><span class="p">),</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'change'</span><span class="p">);</span>
</pre></div>

<p>The <code>handler</code> can be either a function or an object as it is for <code>DOM</code> methods such <code>addEventListener</code> or <code>removeEventListener</code>.
In this case the method <code>handleEvent</code> is invoked with the object itself as context as it is for the <a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener">native DOM behavior</a>.</p>

<p>The third boolean <code>capture</code> argument is useless with JS objects but might be used in some <code>DOM</code> specific case.
By default, <code>capture</code> is false.</p>

<h4>
<a name="objectoncetype-handler-capture" class="anchor" href="#objectoncetype-handler-capture"><span class="octicon octicon-link"></span></a>Object#once(type, handler[, capture])</h4>

<p>Same as <code>Object#on(type, handler[, capture])</code> except the event is triggered once and never again unless specified later on.</p>

<div class="highlight highlight-javascript"><pre><span class="c1">// on a generic HTML page inside a script tag...</span>
<span class="k">this</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">'load'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'page fully loaded'</span><span class="p">);</span>
  <span class="c1">// even if triggered manually</span>
  <span class="c1">// this event won't fire anymore</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="s1">'load'</span><span class="p">);</span>
  <span class="c1">// nothing happened</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="objectofftype-handler-capture" class="anchor" href="#objectofftype-handler-capture"><span class="octicon octicon-link"></span></a>Object#off(type, handler[, capture])</h4>

<p>Returns the object itself after removing an event handler, if present.
This is basically the equivalent of <code>removeListener</code> or <code>removeEventListener</code>.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">function</span> <span class="nx">clearAllEntries</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">database</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="p">}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'unload'</span><span class="p">,</span> <span class="nx">clearAllEntries</span><span class="p">);</span>
<span class="nx">keepEntriesButton</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="c1">// drop the clear procedure</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">'unload'</span><span class="p">,</span> <span class="nx">clearAllEntries</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="objecttriggertype-data" class="anchor" href="#objecttriggertype-data"><span class="octicon octicon-link"></span></a>Object#trigger(type[, data])</h4>

<p>Triggers / fires all handlers associated to the event <code>type</code> enriching the event with arbitrary <code>data</code>.
If specified, <code>data</code> must be an object with one or more properties.
<code>data</code> will be attached as event property too while properties will be copied over the event object.</p>

<p>This method is more suitable for DOM events or those events based on a single argument parameter/object.</p>

<div class="highlight highlight-javascript"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">onresize</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">manual</span><span class="p">);</span>
<span class="p">};</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">'resize'</span><span class="p">,</span> <span class="p">{</span><span class="nx">manual</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>
</pre></div>

<h4>
<a name="objectemittype-arg1-argn" class="anchor" href="#objectemittype-arg1-argn"><span class="octicon octicon-link"></span></a>Object#emit(type[, arg1][, argN])</h4>

<p>This method <a href="http://nodejs.org/api/events.html#events_emitter_emit_event_arg1_arg2">behaves like node.js</a> one, accepting one or more optional arguments after the type.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'modify'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'delete'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
  <span class="p">})</span>
<span class="p">;</span>
<span class="nx">object</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">'modify'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">());</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">key</span><span class="p">);</span> <span class="c1">// 0.3245979759376496</span>
<span class="nx">object</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">'delete'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">key</span><span class="p">);</span> <span class="c1">// undefined</span>
</pre></div>

<h4>
<a name="objectlistenerstype" class="anchor" href="#objectlistenerstype"><span class="octicon octicon-link"></span></a>Object#listeners(type)</h4>

<p>This method <a href="http://nodejs.org/api/events.html#events_emitter_listeners_event">behaves like node.js</a> one but on DOM object it will always return an empty array-like object.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">function</span> <span class="nx">handler</span><span class="p">()</span> <span class="p">{}</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{}.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'event'</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">listeners</span><span class="p">(</span><span class="s1">'event'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">listeners</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">handler</span><span class="p">);</span> <span class="c1">// true</span>
</pre></div>

<p>In the DOM world there's no way to retrieve back nodes and it has never been a real problem but for <em>node.js</em> or generic <em>JS business logic</em> the possibility to understand already added listeners might be handy (I needed this in <a href="https://github.com/WebReflection/dblite#dblite">dblite</a> and I've realized it is a very handy method!)</p>

<h4>
<a name="objectboundtomethod" class="anchor" href="#objectboundtomethod"><span class="octicon octicon-link"></span></a>Object#boundTo(method)</h4>

<p>This method creates a single bound version of the generic function or instance method.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">test</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span>
<span class="p">);</span> <span class="c1">// true</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)();</span> <span class="c1">// true</span>
</pre></div>

<p>If the argument is <em>a function instead of a string</em> that function is used instead.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">function</span> <span class="nx">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span>
<span class="p">);</span> <span class="c1">// true</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="nx">test</span><span class="p">)();</span> <span class="c1">// true</span>
</pre></div>

<p>Same thing if we pass the method itself as function instead of method name:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">test</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">test</span><span class="p">)</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">boundTo</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span>
<span class="p">);</span> <span class="c1">// true</span>
</pre></div>

<h3>
<a name="arrayprototype-enriched-api" class="anchor" href="#arrayprototype-enriched-api"><span class="octicon octicon-link"></span></a>Array.prototype Enriched API</h3>

<p>New in version <code>0.3</code>, all <code>Array.prototype</code> methods but <code>boundTo</code> and <code>listeners</code> have been made smart enough to perform the same call inside each item of the array.</p>

<p>This approach simplifies a very common pattern with collections, specially in the DOM world, so that we can add or remove events to many objects at once.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">function</span> <span class="nx">query</span><span class="p">(</span><span class="nx">CSS</span><span class="p">,</span> <span class="nx">parentNode</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="nb">document</span><span class="p">).</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">CSS</span><span class="p">)</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// later on ...</span>
<span class="nx">query</span><span class="p">(</span><span class="s1">'ul &gt; li'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">doStuff</span><span class="p">);</span>
</pre></div>

<p>The assumption is that collections are commonly used like that.</p>

<h3>
<a name="which-file-" class="anchor" href="#which-file-"><span class="octicon octicon-link"></span></a>Which File ?</h3>

<p><code>eddy.js</code> comes in different flavors but it operates on global, native, constructors.
This means once you require or include or load <code>eddy.js</code> you need to manually <code>delete</code> polluted prototypes if needed.
Anyway, here the list of files you need:</p>

<ul>
<li>
<a href="build/eddy.js">browser without DOM</a>, for <em>browsers</em> meaning down to IE6 baby, fear not!</li>
<li>
<a href="build/eddy.dom.js">browser with DOM</a>, for <em>browsers</em> meaning IE8, using <a href="https://github.com/WebReflection/ie8#ie8">ie8 file</a> plus all modern mobile and desktop browsers</li>
<li>
<a href="build/eddy.amd.js">AMD including DOM</a>, same as <code>eddy.dom.js</code> inside the require AMD logic</li>
<li>
<a href="build/eddy.node.js">node.js</a>, meaning node.js and other server side engines since no export is used/needed</li>
</ul><p>You can install <code>eddy.js</code> directly via <code>npm install eddy</code> too and simply use <code>require('eddy')</code>.
The version for node should work for Rhino too without problems ;-)</p>

<h3>
<a name="why-eddy-as-name-" class="anchor" href="#why-eddy-as-name-"><span class="octicon octicon-link"></span></a>Why Eddy As Name ?</h3>

<p>Not only because of the " <em>Event Driven</em> sound check ", the definition I prefer is the following one:</p>

<blockquote>
<p>a current or trend, as of opinion or events, running counter to the main current.</p>
</blockquote>

<p>but <a href="http://dictionary.reference.com/browse/eddy">all other definitions</a> are somehow very metaphoric too ;-)</p>

<h3>
<a name="not-your-meal-" class="anchor" href="#not-your-meal-"><span class="octicon octicon-link"></span></a>Not Your Meal ?</h3>

<p>If you are stuck in late 90s dogmas about JS and forbidden <code>Object.prototype</code> pollution, you can always go for <a href="https://github.com/WebReflection/event-target#event-target">EventTarget</a> mixin and use that with all your classes.</p>

<p>What <code>eddy.js</code> gives you here, is the ability to forget all these problems and use emitters when you need them, if you need them, as easy as that.</p>
        </section>

        <footer>
          Eddy is maintained by <a href="https://github.com/WebReflection">WebReflection</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>